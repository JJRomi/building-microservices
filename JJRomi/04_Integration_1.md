# CHAPTER 4 . 통합
> 좋은 마이크로서비스의 핵심 원칙은 강한 응집력과 느슨한 결합력이다.

- 마이크로 서비스는 기존 소비자 서비스에 영향을 미치지 않아야 한다.
- 필요한 기술 스택을 좌우하는 통합 기술은 피해야한다.
- 새로운 고객이 등록되면 금융 결제 또는 환영 이메일과 같은 부가적인 프로세스를 시작해야하고, 정보를 변경, 삭제하는 등 또 다른 비즈니스 프로세스가 작동할 수 있다.
- DB란 사실상 공유된 매우 큰 API로 깨지기 쉬우며 대규모의 회귀테스트가 필요하다.

## 동기(synchronous)
- 원격 서버에 대한 호출이 완료될때까지 연산 작업 중단
- 작업 완료 시간을 추론하기 쉬움
- 요청/응답 방식

## 비동기(asynchronous)
- 호출자는 작업이 완료되었다는 회신을 기다리지 않으며,작업의 완료 여부에 관심 없을때도 있다.
- 클라이언트와 서버 간 접속이 오랫동안 유지하기 어려운 장기 작업에 유용하다.
- 결과를 기다리는 동안 중단된 호출이 성능 저하를 일으키는 곳에서 짧은 지연시간이 필요할 때 적합하다.
- 동기 통신보다 처리하는 기술이 조금 더 복잡할 수 있다.

## 요청(request)/응답(response)
- 동기 통신과 명확하게 일치
- 비동기 통신에서는 작업이 완료되었을 때 알려주도록 요청하는 콜백으로 등록할 수 있다.

## 이벤트 기반 협업
- 비동기적이며 매우 결합도가 낮은 방식
- 비즈니스 로직이 핵심 두뇌로 집중화되기보다는 다양한 협업자들에게 고르게 분배된다.
- 이벤트를 발산하는 클라이언트는 이벤트에 반응하는 대상이 누구인지 또는 무엇인지 전혀 알지 못한다.

## 오케스트레이션(orchestration)
- 오케스트라 지휘자처럼 프로세스를 안내하고 구동하는 하나의 중앙 두뇌에 의존한다.
- 고객 서비스에 지나치게 많은 중앙 관리 권한이 부여되는 단점이 있다. 
- 지나치게 의존하는 구현체는 매우 취약하고 높은 변경 비용을 수반한다.

## 코레오그래피(choreography)
- 발레 무용수들이 자신의 역할을 알고 주변의 다른 무용수에 반응하는 것처럼 시스템 각 부분에 작업 내용을 알리고 세부 사항을 수행한다.
- 고객 서비스가 비동식 방식으로 '고객이 생성되었다'라는 이벤트를 발산할 뿐이다.
- 전반적으로 더 느슨히 결합하고 유연하며 변경을 보다 쉽게 수용한다.
- 서비스 경계를 넘어 프로세스를 모니터링하고 추천하는 부가 작업이 필요하다.







 
 
